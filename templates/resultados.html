{% extends "base.html" %}
{% block title %}Resultados de la recomendaci贸n{% endblock %}

{% block content %}
<style>
  .recomendacion-container {
    max-width: 960px;
    margin: 2rem auto;
    background: #fff;
    padding: 2rem;
    border-radius: 14px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
  }

  .recomendacion-container h2 {
    font-size: 1.8rem;
    margin-bottom: 1rem;
    color: #1f3c88;
  }

  .municipio-lista {
    margin-top: 1rem;
  }

  .municipio-item {
    margin-bottom: 1.5rem;
    padding: 1rem;
    background-color: #f5f8ff;
    border-radius: 10px;
  }

  .municipio-item h3 {
    margin-bottom: 0.5rem;
    font-size: 1.2rem;
    color: #1f3c88;
  }

  .municipio-item p {
    margin: 0;
    font-size: 1rem;
  }

  #grafico {
    margin-top: 3rem;
  }
</style>

<div class="recomendacion-container">
  <h2> Resultados de la recomendaci贸n</h2>
  <p>Estos municipios destacan seg煤n tus respuestas. Cada uno ha sido recomendado por una dimensi贸n concreta.</p>

  <div class="municipio-lista">
    {% for row in resultados %}
      <div class="municipio-item">
        <h3>{{ row.Nombre }}</h3>
        <p> Recomendado por: <strong>{{ row.destaca_en|capitalize }}</strong></p>
        <ul>
          <li>Educaci贸n: {{ "%.3f"|format(row.educacion) }}</li>
          <li>Sanidad: {{ "%.3f"|format(row.salud) }}</li>
          <li>Transporte: {{ "%.3f"|format(row.transporte) }}</li>
          <li>Econom铆a: {{ "%.3f"|format(row.economia) }}</li>
          <li>Vivienda: {{ "%.3f"|format(row.housing) }}</li>
        </ul>
      </div>
    {% endfor %}
  </div>

  <!-- GRFICO -->
  <div id="grafico"></div>
</div>

<!-- PLOTLY -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
  const graficoData = {{ grafico | safe }};
  Plotly.newPlot('grafico', graficoData.data, graficoData.layout);
</script>
{% endblock %}
